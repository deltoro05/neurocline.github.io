<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Writing std::filesystem: Path (part 2)</title>
  <meta name="description" content="OK, reboot on std::filesystem::path. There are bits of it that require C++ trickery; my firstimpulse was to dive into the hard parts first, but I ran into ex...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <!-- link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Old+Standard+TT"-->
  <!---link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700"-->
  <!---link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic"-->
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Indie+Flower">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:400,400">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:400,400italic">
  <link rel="canonical" href="http://neurocline.github.io/dev/2017/04/03/writing-std-filesystem-path-part-2.html">
  <link rel="alternate" type="application/rss+xml" title="Some Things Are Obvious" href="http://neurocline.github.io/feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Some Things Are Obvious</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/archive/">Archive</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/papers/">Papers</a>
          
        
          
          <a class="page-link" href="/reading/">Reading List</a>
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Writing std::filesystem: Path (part 2)</h1>
    <p class="post-meta">Apr 3, 2017</p>
  </header>

  <article class="post-content">
    <p>OK, reboot on <code class="highlighter-rouge">std::filesystem::path</code>. There are bits of it that require C++ trickery; my first
impulse was to dive into the hard parts first, but I ran into expression SFINAE hell with
Visual Studio 2015 (which I need to support).</p>

<p>So instead I want to get the bulk of <code class="highlighter-rouge">path</code> done before I tackle the template functions that
have complications around them. So ignore everything said before, let’s try again.</p>

<h1 id="27108-class-path">27.10.8 Class path</h1>

<h2 id="value_type-and-preferred_separator"><code class="highlighter-rouge">value_type</code> and <code class="highlighter-rouge">preferred_separator</code></h2>

<p>A <code class="highlighter-rouge">path</code> has a <code class="highlighter-rouge">value_type</code> that is platform-specific; this is meant to map directly to the
platform filesystem character set. It also has a <code class="highlighter-rouge">preferred_separator</code> that is the native
separator; this seems to have been concocted mainly for Windows support. It also has
a <code class="highlighter-rouge">string_type</code>, but this is just <code class="highlighter-rouge">basic_string&lt;value_type</code>. So we have</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++">    <span class="cp">#if defined(_WIN32) &amp;&amp; defined(UNICODE)
</span>    <span class="c1">// Windows Unicode build is UCS16LE
</span>    <span class="k">using</span> <span class="n">value_type</span> <span class="o">=</span> <span class="kt">wchar_t</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">value_type</span> <span class="n">preferred_separator</span> <span class="o">=</span> <span class="sc">L'\\'</span><span class="p">;</span>
    <span class="c1">// Otherwise, this is MBCS, e.g. single-byte
</span>    <span class="cp">#elif defined(_WIN32) &amp;&amp; !defined(UNICODE)
</span>    <span class="c1">// Otherwise, this is MBCS, e.g. single-byte
</span>    <span class="k">using</span> <span class="n">value_type</span> <span class="o">=</span> <span class="kt">char</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">value_type</span> <span class="n">preferred_separator</span> <span class="o">=</span> <span class="sc">'\\'</span><span class="p">;</span>
    <span class="cp">#else
</span>    <span class="k">using</span> <span class="n">value_type</span> <span class="o">=</span> <span class="kt">char</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">value_type</span> <span class="n">preferred_separator</span> <span class="o">=</span> <span class="sc">'/'</span><span class="p">;</span>
    <span class="cp">#endif
</span>
    <span class="k">using</span> <span class="n">string_type</span> <span class="o">=</span> <span class="n">basic_string</span><span class="o">&lt;</span><span class="n">value_type</span><span class="o">&gt;</span><span class="p">;</span></code></pre></figure>

<p>This is part of what is called native format; fileystems accept and return path strings in native
format. Windows Unicode builds use UTF16LE as the filesystem character set and separate path components
with ‘\’. The actual definition of native pathname format is “The operating system dependent pathname
format accepted by the host operating system”.</p>

<h2 id="271081-generic-pathname-format">27.10.8.1 Generic pathname format</h2>

<p>Unlike the native format, generic format is specified. This is so that general-purpose code can
form and manipulate paths, presuming that there are conversion functions from native to generic,
and from generic to native.</p>

<p>For Windows and POSIX, this is mostly a moot point, because generic format is acceptable as a native path,
you can pass either as function arguments, and paths for files and directories share the same syntax.
This hedge exists so that other filesystems can be mapped to a common format.</p>

<p>On Windows, native format uses the preferred separator ‘\’, whereas generic paths prefer to join
paths with ‘/’. Obviously POSIX uses ‘/’ natively, and Windows NT filesystem functions allow ‘/’
in most cases (with the exception of so-called UNC file paths which have to start with <code class="highlighter-rouge">\\\\</code>).</p>

<h2 id="271082-path-conversions">27.10.8.2 path conversions</h2>

<p>We are going to sidestep path conversions completely to begin with, since we can use either generic
paths or native paths at will in calls.</p>

<h2 id="271083-path-requirements">27.10.8.3 path requirements</h2>

<p>There are a number of function templates that, in the spec, take a paramter named <code class="highlighter-rouge">Source</code>. This
is a stand-in for a family of function templates; <code class="highlighter-rouge">Source</code> is either a specialization of 
<code class="highlighter-rouge">basic_string</code> or <code class="highlighter-rouge">basic_string_view</code>, or <code class="highlighter-rouge">iterator_traits&lt;decay_t&lt;Source&gt;&gt;::value_type</code> is valid
and denotes a (possibly const) encoded character type.</p>

<p>This applies to constructors, assignments, appends and concatenation, as these are the places
that data are passed to <code class="highlighter-rouge">path</code>.</p>

<h2 id="2710841-path-constructors">27.10.8.4.1 path constructors</h2>

<p>There are 5-7 different constructors, depending on how you look at it. In the following,
we are going to ignore any character conversions or normalizations that might need to be
done.</p>

<ul>
  <li><code class="highlighter-rouge">path()</code>: construct path with empty path string</li>
  <li><code class="highlighter-rouge">path(const path&amp;)</code>: copy-construct from existing <code class="highlighter-rouge">path</code></li>
  <li><code class="highlighter-rouge">path(path&amp;&amp;)</code>: move-construct from existing <code class="highlighter-rouge">path</code></li>
</ul>

<p>The default constructor and destructor are easy, because we don’t need any state. Likewise, the
copy constructor and move constructor can rely on the copy and move constructor for our underlying
data type.</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++">    <span class="n">path</span><span class="p">()</span> <span class="p">{}</span>
    <span class="n">path</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="o">:</span> <span class="n">pathstring</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">pathstring</span><span class="p">)</span> <span class="p">{}</span>
    <span class="n">path</span><span class="p">(</span><span class="n">path</span><span class="o">&amp;&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="o">:</span> <span class="n">pathstring</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">pathstring</span><span class="p">))</span> <span class="p">{}</span></code></pre></figure>

<ul>
  <li><code class="highlighter-rouge">path(string_type&amp;&amp; source)</code>: construct from string of underlying type</li>
</ul>

<p>Another easy constructor is the one that moves from a matching <code class="highlighter-rouge">string_type</code>.</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++">    <span class="n">path</span><span class="p">(</span><span class="n">string_type</span><span class="o">&amp;&amp;</span> <span class="n">source</span><span class="p">)</span> <span class="o">:</span> <span class="n">pathstring</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">source</span><span class="p">))</span> <span class="p">{}</span></code></pre></figure>

<p>There is a “construct from Source” template where Source can be a number of things</p>

<ul>
  <li><code class="highlighter-rouge">template&lt;class Source&gt; path(const Source&amp; source)</code>: construct from Source</li>
</ul>

<p>The <code class="highlighter-rouge">Source</code> type can be one of: basic_string, string_view, iterator of NCTCS,
or array that decays to pointer to NCTCS; NCTCS is just a fancy way of saying
“zero-terminated string”, except that string is any sequence of characters that
an iterator can step through. Since decay-to-pointer ends up with a pointer of
a certain type, we could consider this as three overloads.</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">EcharT</span><span class="p">,</span> <span class="k">class</span> <span class="nc">traits</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Allocator</span><span class="o">&gt;</span>
    <span class="n">path</span><span class="p">(</span><span class="k">const</span> <span class="n">basic_string</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="p">,</span> <span class="n">traits</span><span class="p">,</span> <span class="n">Allocator</span><span class="o">&gt;&amp;</span> <span class="n">source</span><span class="p">);</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">EcharT</span><span class="p">,</span> <span class="k">class</span> <span class="nc">traits</span><span class="o">&gt;</span>
    <span class="n">path</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">basic_string_view</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="p">,</span> <span class="n">traits</span><span class="o">&gt;&amp;</span> <span class="n">source</span><span class="p">);</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator</span><span class="p">,</span>
         <span class="k">class</span> <span class="err">=</span> <span class="nc">typename</span> <span class="n">enable_if</span><span class="o">&lt;</span><span class="n">is_iterator</span><span class="o">&lt;</span><span class="n">InputIterator</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">,</span> <span class="kt">void</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&gt;</span>
    <span class="n">path</span><span class="p">(</span><span class="n">InputIterator</span> <span class="n">source</span><span class="p">)</span></code></pre></figure>

<p>We have a constructor that is passed two input iterators - this needs a type trait
in order to prevent it from matching non-iterator two-parameter constructors, just
like the single-parameter template needs a type trait to prevent it from matching
other single-parameter constructors.</p>

<ul>
  <li><code class="highlighter-rouge">template&lt;class InputIterator&gt; path(InputIterator first, InputIterator last)</code></li>
</ul>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator</span><span class="p">,</span>
         <span class="k">class</span> <span class="err">=</span> <span class="nc">typename</span> <span class="n">enable_if</span><span class="o">&lt;</span><span class="n">is_iterator</span><span class="o">&lt;</span><span class="n">InputIterator</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">,</span> <span class="kt">void</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&gt;</span>
    <span class="n">path</span><span class="p">(</span><span class="n">InputIterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIterator</span> <span class="n">last</span><span class="p">);</span></code></pre></figure>

<p>And then there are some +locale versions of constructors.</p>

<ul>
  <li><code class="highlighter-rouge">template&lt;class Source&gt; path(const Source&amp; source, const locale&amp; loc)</code></li>
  <li><code class="highlighter-rouge">template&lt;class InputIterator&gt; path(InputIterator first, InputIterator last, const locale&amp; loc)</code></li>
</ul>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">EcharT</span><span class="p">,</span> <span class="k">class</span> <span class="nc">traits</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Allocator</span><span class="o">&gt;</span>
	<span class="n">path</span><span class="p">(</span><span class="k">const</span> <span class="n">basic_string</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="p">,</span> <span class="n">traits</span><span class="p">,</span> <span class="n">Allocator</span><span class="o">&gt;&amp;</span> <span class="n">source</span><span class="p">,</span> <span class="k">const</span> <span class="n">locale</span><span class="o">&amp;</span> <span class="n">loc</span><span class="p">);</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">EcharT</span><span class="p">,</span> <span class="k">class</span> <span class="nc">traits</span><span class="o">&gt;</span>
	<span class="n">path</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">basic_string_view</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="p">,</span> <span class="n">traits</span><span class="o">&gt;&amp;</span> <span class="n">source</span><span class="p">,</span> <span class="k">const</span> <span class="n">locale</span><span class="o">&amp;</span> <span class="n">loc</span><span class="p">);</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator</span><span class="p">,</span>
         <span class="k">class</span> <span class="err">=</span> <span class="nc">typename</span> <span class="n">enable_if</span><span class="o">&lt;</span><span class="n">is_iterator</span><span class="o">&lt;</span><span class="n">InputIterator</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">,</span> <span class="kt">void</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&gt;</span>
	<span class="n">path</span><span class="p">(</span><span class="n">InputIterator</span> <span class="n">source</span><span class="p">,</span> <span class="k">const</span> <span class="n">locale</span><span class="o">&amp;</span> <span class="n">loc</span><span class="p">)</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator</span><span class="p">,</span>
         <span class="k">class</span> <span class="err">=</span> <span class="nc">typename</span> <span class="n">enable_if</span><span class="o">&lt;</span><span class="n">is_iterator</span><span class="o">&lt;</span><span class="n">InputIterator</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">,</span> <span class="kt">void</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&gt;</span>
	<span class="n">path</span><span class="p">(</span><span class="n">InputIterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIterator</span> <span class="n">last</span><span class="p">,</span> <span class="k">const</span> <span class="n">locale</span><span class="o">&amp;</span> <span class="n">loc</span><span class="p">);</span></code></pre></figure>

<h2 id="2710842-path-assignments">27.10.8.4.2 path assignments</h2>

<p>stuff from code here</p>

<h1 id="reference">Reference</h1>

<p>This is the definition of <code class="highlighter-rouge">std::filesystem::path</code> from the C++ standard section 27.10.8.</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">filesystem</span> <span class="p">{</span>
<span class="k">class</span> <span class="nc">path</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
	<span class="k">using</span> <span class="n">value_type</span> <span class="o">=</span> <span class="n">see</span> <span class="n">below</span> <span class="p">;</span>
	<span class="k">using</span> <span class="n">string_type</span> <span class="o">=</span> <span class="n">basic_string</span><span class="o">&lt;</span><span class="n">value_type</span><span class="o">&gt;</span><span class="p">;</span>
	<span class="k">static</span> <span class="k">constexpr</span> <span class="n">value_type</span> <span class="n">preferred_separator</span> <span class="o">=</span> <span class="n">see</span> <span class="n">below</span> <span class="p">;</span>

	<span class="c1">// 27.10.8.4.1, constructors and destructor
</span>	<span class="n">path</span><span class="p">()</span> <span class="k">noexcept</span><span class="p">;</span>
	<span class="n">path</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">);</span>
	<span class="n">path</span><span class="p">(</span><span class="n">path</span><span class="o">&amp;&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="k">noexcept</span><span class="p">;</span>
	<span class="n">path</span><span class="p">(</span><span class="n">string_type</span><span class="o">&amp;&amp;</span> <span class="n">source</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Source</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="p">(</span><span class="k">const</span> <span class="n">Source</span><span class="o">&amp;</span> <span class="n">source</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="p">(</span><span class="n">InputIterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIterator</span> <span class="n">last</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Source</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="p">(</span><span class="k">const</span> <span class="n">Source</span><span class="o">&amp;</span> <span class="n">source</span><span class="p">,</span> <span class="k">const</span> <span class="n">locale</span><span class="o">&amp;</span> <span class="n">loc</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="p">(</span><span class="n">InputIterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIterator</span> <span class="n">last</span><span class="p">,</span> <span class="k">const</span> <span class="n">locale</span><span class="o">&amp;</span> <span class="n">loc</span><span class="p">);</span>
	<span class="o">~</span><span class="n">path</span><span class="p">();</span>

	<span class="c1">// 27.10.8.4.2, assignments
</span>	<span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">);</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">path</span><span class="o">&amp;&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="k">noexcept</span><span class="p">;</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">string_type</span><span class="o">&amp;&amp;</span> <span class="n">source</span><span class="p">);</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="n">string_type</span><span class="o">&amp;&amp;</span> <span class="n">source</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Source</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Source</span><span class="o">&amp;</span> <span class="n">source</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Source</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="k">const</span> <span class="n">Source</span><span class="o">&amp;</span> <span class="n">source</span><span class="p">)</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="n">assign</span><span class="p">(</span><span class="n">InputIterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIterator</span> <span class="n">last</span><span class="p">);</span>

	<span class="c1">// 27.10.8.4.3, appends
</span>	<span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">/=</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Source</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">/=</span><span class="p">(</span><span class="k">const</span> <span class="n">Source</span><span class="o">&amp;</span> <span class="n">source</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Source</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="n">append</span><span class="p">(</span><span class="k">const</span> <span class="n">Source</span><span class="o">&amp;</span> <span class="n">source</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="n">append</span><span class="p">(</span><span class="n">InputIterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIterator</span> <span class="n">last</span><span class="p">);</span>

	<span class="c1">// 27.10.8.4.4, concatenation
</span>	<span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="k">const</span> <span class="n">string_type</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="n">basic_string_view</span><span class="o">&lt;</span><span class="n">value_type</span><span class="o">&gt;</span> <span class="n">x</span><span class="p">);</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="k">const</span> <span class="n">value_type</span><span class="o">*</span> <span class="n">x</span><span class="p">);</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="n">value_type</span> <span class="n">x</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Source</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="k">const</span> <span class="n">Source</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">EcharT</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="n">EcharT</span> <span class="n">x</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Source</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="n">concat</span><span class="p">(</span><span class="k">const</span> <span class="n">Source</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator</span><span class="o">&gt;</span>
	  <span class="n">path</span><span class="o">&amp;</span> <span class="n">concat</span><span class="p">(</span><span class="n">InputIterator</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIterator</span> <span class="n">last</span><span class="p">);</span>

	<span class="c1">// 27.10.8.4.5, modifiers
</span>	<span class="kt">void</span> <span class="n">clear</span><span class="p">()</span> <span class="k">noexcept</span><span class="p">;</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="n">make_preferred</span><span class="p">();</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="n">remove_filename</span><span class="p">();</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="n">replace_filename</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">replacement</span><span class="p">);</span>
	<span class="n">path</span><span class="o">&amp;</span> <span class="n">replace_extension</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">replacement</span> <span class="o">=</span> <span class="n">path</span><span class="p">());</span>
	<span class="kt">void</span> <span class="n">swap</span><span class="p">(</span><span class="n">path</span><span class="o">&amp;</span> <span class="n">rhs</span><span class="p">)</span> <span class="k">noexcept</span><span class="p">;</span>

	<span class="c1">// 27.10.8.4.6, native format observers
</span>	<span class="k">const</span> <span class="n">string_type</span><span class="o">&amp;</span> <span class="n">native</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span><span class="p">;</span>
	<span class="k">const</span> <span class="n">value_type</span><span class="o">*</span> <span class="n">c_str</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span><span class="p">;</span>
	<span class="k">operator</span> <span class="n">string_type</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">EcharT</span><span class="p">,</span> <span class="k">class</span> <span class="nc">traits</span> <span class="o">=</span> <span class="n">char_traits</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="o">&gt;</span><span class="p">,</span>
	          <span class="k">class</span> <span class="nc">Allocator</span> <span class="o">=</span> <span class="n">allocator</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="o">&gt;&gt;</span>
	  <span class="n">basic_string</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="p">,</span> <span class="n">traits</span><span class="p">,</span> <span class="n">Allocator</span><span class="o">&gt;</span>
	  <span class="n">string</span><span class="p">(</span><span class="k">const</span> <span class="n">Allocator</span><span class="o">&amp;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Allocator</span><span class="p">())</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">wstring</span> <span class="n">wstring</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">u8string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">u16string</span> <span class="n">u16string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">u32string</span> <span class="n">u32string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

	<span class="c1">// 27.10.8.4.7, generic format observers
</span>	<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">EcharT</span><span class="p">,</span> <span class="k">class</span> <span class="nc">traits</span> <span class="o">=</span> <span class="n">char_traits</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="o">&gt;</span><span class="p">,</span>
	          <span class="k">class</span> <span class="nc">Allocator</span> <span class="o">=</span> <span class="n">allocator</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="o">&gt;&gt;</span>
	  <span class="n">basic_string</span><span class="o">&lt;</span><span class="n">EcharT</span><span class="p">,</span> <span class="n">traits</span><span class="p">,</span> <span class="n">Allocator</span><span class="o">&gt;</span>
      <span class="n">generic_string</span><span class="p">(</span><span class="k">const</span> <span class="n">Allocator</span><span class="o">&amp;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Allocator</span><span class="p">())</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">generic_string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">wstring</span> <span class="n">generic_wstring</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">generic_u8string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">u16string</span> <span class="n">generic_u16string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">u32string</span> <span class="n">generic_u32string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

	<span class="c1">// 27.10.8.4.8, compare
</span>	<span class="kt">int</span> <span class="n">compare</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">compare</span><span class="p">(</span><span class="k">const</span> <span class="n">string_type</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">compare</span><span class="p">(</span><span class="n">basic_string_view</span><span class="o">&lt;</span><span class="n">value_type</span><span class="o">&gt;</span> <span class="n">s</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">compare</span><span class="p">(</span><span class="k">const</span> <span class="n">value_type</span><span class="o">*</span> <span class="n">s</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

	<span class="c1">// 27.10.8.4.9, decomposition
</span>	<span class="n">path</span> <span class="n">root_name</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">path</span> <span class="n">root_directory</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">path</span> <span class="n">root_path</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">path</span> <span class="n">relative_path</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">path</span> <span class="n">parent_path</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">path</span> <span class="n">filename</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">path</span> <span class="n">stem</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">path</span> <span class="n">extension</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

	<span class="c1">// 27.10.8.4.10, query
</span>	<span class="kt">bool</span> <span class="n">empty</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">has_root_name</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">has_root_directory</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">has_root_path</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">has_relative_path</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">has_parent_path</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">has_filename</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">has_stem</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">has_extension</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">is_absolute</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="kt">bool</span> <span class="n">is_relative</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

	<span class="c1">// 27.10.8.4.11, generation
</span>	<span class="n">path</span> <span class="n">lexically_normal</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">path</span> <span class="n">lexically_relative</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">base</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">path</span> <span class="n">lexically_proximate</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">&amp;</span> <span class="n">base</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

	<span class="c1">// 27.10.8.5, iterators
</span>	<span class="k">class</span> <span class="nc">iterator</span><span class="p">;</span>
	<span class="k">using</span> <span class="n">const_iterator</span> <span class="o">=</span> <span class="n">iterator</span><span class="p">;</span>
	<span class="n">iterator</span> <span class="n">begin</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
	<span class="n">iterator</span> <span class="n">end</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

<span class="k">private</span><span class="o">:</span>
	<span class="n">string_type</span> <span class="n">pathstring</span><span class="p">;</span> <span class="c1">// exposition only
</span><span class="p">};</span>
<span class="p">}</span></code></pre></figure>


  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Some Things Are Obvious</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Some Things Are Obvious</li>
          <li><a href="mailto:neurocline@gmail.com">neurocline@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/neurocline">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">neurocline</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/neurocline">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">neurocline</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Answers to some of the world's questions
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
